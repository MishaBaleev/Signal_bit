{"ast":null,"code":"import URLToolkit from 'url-toolkit';\nimport window from 'global/window';\nvar DEFAULT_LOCATION = 'http://example.com';\nvar resolveUrl = function resolveUrl(baseUrl, relativeUrl) {\n  // return early if we don't need to resolve\n  if (/^[a-z]+:/i.test(relativeUrl)) {\n    return relativeUrl;\n  } // if baseUrl is a data URI, ignore it and resolve everything relative to window.location\n\n  if (/^data:/.test(baseUrl)) {\n    baseUrl = window.location && window.location.href || '';\n  } // IE11 supports URL but not the URL constructor\n  // feature detect the behavior we want\n\n  var nativeURL = typeof window.URL === 'function';\n  var protocolLess = /^\\/\\//.test(baseUrl); // remove location if window.location isn't available (i.e. we're in node)\n  // and if baseUrl isn't an absolute url\n\n  var removeLocation = !window.location && !/\\/\\//i.test(baseUrl); // if the base URL is relative then combine with the current location\n\n  if (nativeURL) {\n    baseUrl = new window.URL(baseUrl, window.location || DEFAULT_LOCATION);\n  } else if (!/\\/\\//i.test(baseUrl)) {\n    baseUrl = URLToolkit.buildAbsoluteURL(window.location && window.location.href || '', baseUrl);\n  }\n  if (nativeURL) {\n    var newUrl = new URL(relativeUrl, baseUrl); // if we're a protocol-less url, remove the protocol\n    // and if we're location-less, remove the location\n    // otherwise, return the url unmodified\n\n    if (removeLocation) {\n      return newUrl.href.slice(DEFAULT_LOCATION.length);\n    } else if (protocolLess) {\n      return newUrl.href.slice(newUrl.protocol.length);\n    }\n    return newUrl.href;\n  }\n  return URLToolkit.buildAbsoluteURL(baseUrl, relativeUrl);\n};\nexport default resolveUrl;","map":{"version":3,"names":["URLToolkit","window","DEFAULT_LOCATION","resolveUrl","baseUrl","relativeUrl","test","location","href","nativeURL","URL","protocolLess","removeLocation","buildAbsoluteURL","newUrl","slice","length","protocol"],"sources":["/Users/mihailbaleev/Documents/GitHub/signal-BIT/signal/node_modules/@videojs/vhs-utils/es/resolve-url.js"],"sourcesContent":["import URLToolkit from 'url-toolkit';\nimport window from 'global/window';\nvar DEFAULT_LOCATION = 'http://example.com';\n\nvar resolveUrl = function resolveUrl(baseUrl, relativeUrl) {\n  // return early if we don't need to resolve\n  if (/^[a-z]+:/i.test(relativeUrl)) {\n    return relativeUrl;\n  } // if baseUrl is a data URI, ignore it and resolve everything relative to window.location\n\n\n  if (/^data:/.test(baseUrl)) {\n    baseUrl = window.location && window.location.href || '';\n  } // IE11 supports URL but not the URL constructor\n  // feature detect the behavior we want\n\n\n  var nativeURL = typeof window.URL === 'function';\n  var protocolLess = /^\\/\\//.test(baseUrl); // remove location if window.location isn't available (i.e. we're in node)\n  // and if baseUrl isn't an absolute url\n\n  var removeLocation = !window.location && !/\\/\\//i.test(baseUrl); // if the base URL is relative then combine with the current location\n\n  if (nativeURL) {\n    baseUrl = new window.URL(baseUrl, window.location || DEFAULT_LOCATION);\n  } else if (!/\\/\\//i.test(baseUrl)) {\n    baseUrl = URLToolkit.buildAbsoluteURL(window.location && window.location.href || '', baseUrl);\n  }\n\n  if (nativeURL) {\n    var newUrl = new URL(relativeUrl, baseUrl); // if we're a protocol-less url, remove the protocol\n    // and if we're location-less, remove the location\n    // otherwise, return the url unmodified\n\n    if (removeLocation) {\n      return newUrl.href.slice(DEFAULT_LOCATION.length);\n    } else if (protocolLess) {\n      return newUrl.href.slice(newUrl.protocol.length);\n    }\n\n    return newUrl.href;\n  }\n\n  return URLToolkit.buildAbsoluteURL(baseUrl, relativeUrl);\n};\n\nexport default resolveUrl;"],"mappings":"AAAA,OAAOA,UAAU,MAAM,aAAa;AACpC,OAAOC,MAAM,MAAM,eAAe;AAClC,IAAIC,gBAAgB,GAAG,oBAAoB;AAE3C,IAAIC,UAAU,GAAG,SAASA,UAAUA,CAACC,OAAO,EAAEC,WAAW,EAAE;EACzD;EACA,IAAI,WAAW,CAACC,IAAI,CAACD,WAAW,CAAC,EAAE;IACjC,OAAOA,WAAW;EACpB,CAAC,CAAC;;EAGF,IAAI,QAAQ,CAACC,IAAI,CAACF,OAAO,CAAC,EAAE;IAC1BA,OAAO,GAAGH,MAAM,CAACM,QAAQ,IAAIN,MAAM,CAACM,QAAQ,CAACC,IAAI,IAAI,EAAE;EACzD,CAAC,CAAC;EACF;;EAGA,IAAIC,SAAS,GAAG,OAAOR,MAAM,CAACS,GAAG,KAAK,UAAU;EAChD,IAAIC,YAAY,GAAG,OAAO,CAACL,IAAI,CAACF,OAAO,CAAC,CAAC,CAAC;EAC1C;;EAEA,IAAIQ,cAAc,GAAG,CAACX,MAAM,CAACM,QAAQ,IAAI,CAAC,OAAO,CAACD,IAAI,CAACF,OAAO,CAAC,CAAC,CAAC;;EAEjE,IAAIK,SAAS,EAAE;IACbL,OAAO,GAAG,IAAIH,MAAM,CAACS,GAAG,CAACN,OAAO,EAAEH,MAAM,CAACM,QAAQ,IAAIL,gBAAgB,CAAC;EACxE,CAAC,MAAM,IAAI,CAAC,OAAO,CAACI,IAAI,CAACF,OAAO,CAAC,EAAE;IACjCA,OAAO,GAAGJ,UAAU,CAACa,gBAAgB,CAACZ,MAAM,CAACM,QAAQ,IAAIN,MAAM,CAACM,QAAQ,CAACC,IAAI,IAAI,EAAE,EAAEJ,OAAO,CAAC;EAC/F;EAEA,IAAIK,SAAS,EAAE;IACb,IAAIK,MAAM,GAAG,IAAIJ,GAAG,CAACL,WAAW,EAAED,OAAO,CAAC,CAAC,CAAC;IAC5C;IACA;;IAEA,IAAIQ,cAAc,EAAE;MAClB,OAAOE,MAAM,CAACN,IAAI,CAACO,KAAK,CAACb,gBAAgB,CAACc,MAAM,CAAC;IACnD,CAAC,MAAM,IAAIL,YAAY,EAAE;MACvB,OAAOG,MAAM,CAACN,IAAI,CAACO,KAAK,CAACD,MAAM,CAACG,QAAQ,CAACD,MAAM,CAAC;IAClD;IAEA,OAAOF,MAAM,CAACN,IAAI;EACpB;EAEA,OAAOR,UAAU,CAACa,gBAAgB,CAACT,OAAO,EAAEC,WAAW,CAAC;AAC1D,CAAC;AAED,eAAeF,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}